{
  "input": {
    # kinesis and file are the only options for Transformer
    # Optional, default value kinesis
    "type": "kinesis",
    # KCL app name - a DynamoDB table will be created with the same name
    # Optional, default value Transformer
    "appName": "${app_name}",
    # Kinesis Stream name
    "streamName": "${stream_name}",
    # Kinesis region
    # This field is optional if it can be resolved with AWS region provider chain.
    # It checks places like env variables, system properties, AWS profile file.
    # https://sdk.amazonaws.com/java/api/latest/software/amazon/awssdk/regions/providers/DefaultAwsRegionProviderChain.html
    "region": "${region}",
    # Kinesis position: LATEST or TRIM_HORIZON
    # Optional, default value LATEST
    "position": "${initial_position}"
    # Optional, set the mode for retrieving records.
    "retrievalMode": {
      "type": "Polling"
      # Maximum size of a batch returned by a call to getRecords.
      "maxRecords": 10000
    }
  }

  # Path to transformed archive
  "output": {
    # Path to transformed output
%{ if widerow_file_format == "parquet" ~}
    # Note: protocol must be s3a due to dependency on hadoop-aws
    "path": "s3a://${transformed_output}",
%{ else }
    "path": "s3://${transformed_output}",
%{ endif }
    # Transformer output compression, GZIP or NONE
    # Optional, default value GZIP
    "compression": "${compression}",
    # Optional if it can be resolved with AWS region provider chain.
    "region": "${region}"
  }

  # Frequency to emit transforming finished message - 5,10,15,20,30,60 etc minutes
  # Optional, default value 10 minutes
  "windowing": "${window_period}"

  # Queue used to communicate with Loader
  %{ if sqs_enabled ~}
  "queue": {
    # Type of the queue. It can be either sqs or sns
    "type": "sqs",
    # Name of the sqs queue
    "queueName": "${sqs_queue_name}",
    # Region of the SQS queue
    # Optional if it can be resolved with AWS region provider chain
    "region": "${region}"
  }
  %{else}
  "queue": {
    # Type of the queue. It can be either sqs or sns
    "type": "sns",
    # ARN of SNS topic
    "topicArn": "${sns_topic_arn}",
    # Region of the SNS topic
    "region": "${region}"
  }
  %{endif}

  # Schema-specific format settings (recommended to leave all three groups empty and use TSV as default)
  "formats": {
%{ if transformation_type == "shred" ~}
    "transformationType": "shred"
    # Format used by default (TSV or JSON)
    # Optional, default value TSV
    "default": "${default_shred_format}",
    # Schemas to be shredded as JSONs, corresponding JSONPath files must be present. Automigrations will be disabled
    # Optional, default value []
    "json": ${schemas_json},
    # Schemas to be shredded as TSVs, presence of the schema on Iglu Server is necessary. Automigartions enabled
    # Optional, default value []
    "tsv": ${schemas_tsv},
    # Schemas that won't be loaded
    # Optional, default value []
    "skip": ${schemas_skip}
%{endif}
%{ if transformation_type == "widerow" ~}
    "transformationType": "widerow"
    # Optional. Denotes output file format when transformationType is 'widerow'.
    # Possible values are 'json' and 'parquet'. Default value 'json'.
    "fileFormat": "${widerow_file_format}"
%{endif}
  }

  "monitoring": {
    "metrics": {
      "cloudWatch": false
    }
  }

  "telemetry": {
    "disable": ${telemetry_disable}
    "interval": 15 minutes
    "method": "POST"
    "collectorUri": "${telemetry_collector_uri}"
    "collectorPort": ${telemetry_collector_port}
    "secure": ${telemetry_secure}
    "userProvidedId": "${telemetry_user_provided_id}"
    "autoGeneratedId": "${telemetry_auto_gen_id}"
    "moduleName": "${telemetry_module_name}"
    "moduleVersion": "${telemetry_module_version}"
  }
}
